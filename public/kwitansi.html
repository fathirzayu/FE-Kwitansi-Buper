<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <title>KWITANSI-{{noKwitansi}}</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="icon" type="image/png" href="/buper.png" />
  <style>
    :root {
      --primary:#1f2937;   /* slate-800 */
      --muted:#6b7280;     /* gray-500 */
      --border:#e5e7eb;    /* gray-200 */
      --bg:#ffffff;
      --accent:#111827;    /* slate-900 */
    }

    * { box-sizing: border-box; }
    html, body {
      margin: 0; padding: 0;
      background: #f7f7f7; color: #111;
      font: 12px/1.4 system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial;
    }

    .page {
      max-width: 210mm; /* sesuai landscape DL */
      margin: 0 auto;
      padding: 5mm;
      background: var(--bg);
    }

    .toolbar {
      display: flex; gap: 8px; justify-content: flex-end; padding: 8px 0;
    }

    .toolbar button {
      padding: 6px 10px; border: 1px solid var(--border);
      background: #fff; cursor: pointer; border-radius: 6px;
    }

    .kwitansi {
      border: 1px solid var(--border);
      border-radius: 10px;
      padding: 10px;
      box-shadow: 0 1px 0 rgba(17,24,39,.04);
    }

    .header {
      display: grid;
      grid-template-columns: 50px 1fr 160px;
      gap: 8px;
      align-items: center;
      border-bottom: 1px solid var(--border);
      padding-bottom: 6px;
    }

    .logo { width: 50px; height: 50px; border: 1px dashed var(--border);
      border-radius: 6px; display: grid; place-items: center; font-size: 10px; color: var(--muted);
    }

    .instansi h1 { margin: 0; font-size: 16px; color: var(--accent); letter-spacing: .3px; }
    .instansi p { margin: 2px 0 0; color: var(--muted); font-size: 10px; }

    .meta { font-size: 11px; color: var(--primary);
      border: 1px solid var(--border); border-radius: 8px; padding: 6px 8px; background: #fafafa;
    }

    .title { text-align: center; font-weight: 700; letter-spacing: 2px; margin: 8px 0 6px; color: var(--primary); }
    .copy-badge { display: inline-block; font-size: 10px; color: #fff; background: #2563eb;
      padding: 3px 6px; border-radius: 999px; margin: 0 auto 6px; text-align: center;
      -webkit-print-color-adjust: exact !important; print-color-adjust: exact !important;
    }

    .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 8px 12px; }
    .row { display: grid; grid-template-columns: 110px 1fr; gap: 6px; align-items: center; padding: 4px 0; border-bottom: 1px dashed #f0f0f0; }
    .label { color: var(--muted); font-size: 11px; }
    .value { font-weight: 600; color: var(--accent); font-size: 11px; }

    .amount { margin-top: 6px; border: 1px solid var(--border); border-radius: 8px; padding: 6px; background: #fff; }
    .amount .angka { font-size: 16px; font-weight: 700; letter-spacing: .5px; text-align: right; }
    .amount .terbilang { margin-top: 4px; font-size: 10px; color: var(--primary);
      background: #f9fafb; border: 1px dashed var(--border); border-radius: 6px; padding: 4px;
    }

    .footer { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-top: 8px; }
    .ttd-box { border: 1px solid var(--border); border-radius: 8px; padding: 6px; background: #fff; overflow: hidden; }
    .ttd-header { color: var(--muted); font-size: 10px; margin-bottom: 24px; }
    .ttd-name { text-align: center; margin-top: 10px; border-top: 1px solid var(--border); padding-top: 4px; font-weight: 600; font-size: 11px; }

    .note { margin-top: 6px; font-size: 9px; color: var(--muted); }

@media print {
  @page {
    size: 220mm 99mm; /* DL Landscape, bisa diubah sesuai kertas continuous */
        margin: 4mm 5px;  /* atas-bawah 4mm, kiri-kanan 2px */

  }

  body, html {
    margin: 0;
    padding: 3;
    background: #fff !important;
    color: #000 !important;
    font-family: "Courier New", monospace !important; /* font jelas untuk dot matrix */
    font-size: 10pt !important;
    line-height: 1;
  }

  /* Hilangkan elemen non-print */
  .toolbar {
    display: none !important;
  }

  /* Sederhanakan layout */
  .page, .kwitansi, .header, .row, .amount, .footer {
    box-shadow: none !important;
    border: none !important;
    background: #fff !important;
    width: 100% !important;
    padding: 0 !important;
  }

  /* Header */
  .instansi h1 {
    font-size: 14pt !important;
    font-weight: bold;
  }
  .instansi p {
    font-size: 10pt !important;
  }

  /* Grid jadi tabel sederhana */
  .grid {
    display: grid !important;
    grid-template-columns: 1fr 1fr !important; /* tetap 2 kolom */
    gap: 4mm 8mm;
  }

  .row {
    display: grid !important;
    grid-template-columns: 35mm 1fr !important; /* label dan value sejajar */
    gap: 2mm;
    border: none !important;
  }
  .label {
    display: inline-block;
    width: 40mm; /* rata kiri */
    font-weight: bold;
  }
  .value {
    display: inline-block;
  }

  /* Nominal */
  .amount {
    margin-top: 2mm;
    border-top: 1px solid #000;
    border-bottom: 1px solid #000;
    padding: 2mm 0;
  }
  .amount .angka {
    font-size: 11pt !important;
    font-weight: bold;
    text-align: right;
  }
  .amount .terbilang {
    font-size: 10pt !important;
  }

  /* TTD */
  .footer {
    margin-top: 2mm !important; 
    display: flex !important;
    align-items: flex-end;     /* ratakan vertikal */
    justify-content: space-between; /* biar note di kiri, ttd di kanan */
  }

  .note {
    margin-top: 1 !important;
    align-self: flex-end; /* posisikan sejajar bawah dengan footer */
  }
}

  </style>
</head>
<body>
  <div class="page">
    <div class="toolbar">
      <button onclick="window.print()">Cetak</button>
    </div>

    <!-- scale wrapper ditambahkan -->
    <div class="scale-wrapper">
      <div class="kwitansi">
        <div class="header">
          <div class="logo">
            <img src="/buper.png" alt="Logo Buper" style="width: 40px; height: auto;" />
          </div>
          <div class="instansi">
            <h1>STIE BUDI PERTIWI</h1>
            <p>Jl. Lingkar Tanjungpura, Kondangjaya, Karawang, Jawa Barat 41371 / 0812-8975-6902</p>
          </div>
          <div class="meta">
            <div><strong>No. Kwitansi:</strong> <span id="no1">{{noKwitansi}}</span></div>
            <div><strong>Tanggal Cetakan:</strong> <span id="tgl1">{{tanggal}}</span></div>
          </div>
        </div>

        <div class="title">KWITANSI</div>
        <div class="copy-badge">LEMBAR MAHASISWA</div>

        <div class="grid">
          <div class="row"><div class="label">NIM</div><div class="value" id="nim1">{{nim}}</div></div>
          <div class="row"><div class="label">Nama</div><div class="value" id="nama1">{{nama}}</div></div>
          <div class="row"><div class="label">Angkatan</div><div class="value" id="angkatan1">{{angkatan}}</div></div>
          <div class="row"><div class="label">Jenis Pembayaran</div><div class="value" id="jenis1">{{jenisBayar}}</div></div>
          <div class="row"><div class="label">Cara Pembayaran</div><div class="value" id="cara1">{{caraBayar}}</div></div>
          <div class="row"><div class="label">Tanggal Pembayaran</div><div class="value" id="tglbayar1">{{tanggalBayar}}</div></div>
          <div class="row"><div class="label">Keterangan</div><div class="value" id="ket1">{{keteranganBayar}}</div></div>
        </div>

        <div class="amount">
          <div class="angka" id="nominal1">{{nominal}}</div>
          <div class="terbilang" id="terbilang1">{{terbilang}}</div>
        </div>

        <div class="footer">
          <div class="ttd-box">
            <div class="ttd-header" id="jabatan1">{{jabatan}}</div>
            <div class="ttd-name" id="petugas1">{{petugas}}</div>
          </div>
        </div>

        <div class="note">Catatan: Simpan kwitansi ini sebagai bukti pembayaran yang sah.</div>
      </div>
    </div>
  </div>

  <script>
    (function applyQuery() {
      const q = new URLSearchParams(location.search);
      if ([...q.keys()].length === 0) return;
      const map = (id, key) => {
        const el = document.getElementById(id);
        if (!el) return;
        const val = q.get(key);
        if (val !== null) el.textContent = val;
      };
      const fields = ["no","tgl","nim","nama","angkatan","jenis","cara","tglbayar","ket","nominal","terbilang","penerima","petugas"];
      fields.forEach(f => { map(f+"1", f); map(f+"2", f); });
    })();
  </script>
</body>
</html>
